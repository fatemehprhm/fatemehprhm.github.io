<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <script src="../assets/js/config.js"></script>
    <script src="../assets/js/head.js"></script>
    <script> loadHeadContent('Art Gallery | Fatemeh Pourhashem') </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
</head>
<body class="overflow-x-hidden">
    <canvas id="hero-canvas"></canvas>

    <main>
        <!-- Art Gallery Page (Gallery) -->
        <section id="art" class="page-section active">
            <div class="container mx-auto px-6 py-20">
                <h2 class="text-4xl font-bold text-white text-center mb-12">Art Gallery</h2>
                <div class="flex justify-center mb-12">
                    <p class="text-justify max-w-prose text-gray-300">
                        I've been drawing and painting since I was a child, so I thought—why not share some of my work here on my website? You'll also find a few crochet, embroidery, and other handmade pieces. Just a note: not all of the artwork featured is originally mine.
                    </p>
                </div>
                
                <!-- Gallery Grid -->
                <div id="artworks-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Artworks will be loaded here by JavaScript -->
                </div>
            </div>
        </section>

        <script>
        // Function to load and parse YAML file
        async function loadArtworks() {
            try {
                const response = await fetch('../lists/artworks.yaml');
                const yamlText = await response.text();
                const data = jsyaml.load(yamlText);
                
                renderArtworks(data.artworks);
            } catch (error) {
                console.error('Error loading artworks:', error);
            }
        }

        // Function to render artworks in the gallery
        function renderArtworks(artworks) {
            const grid = document.getElementById('artworks-grid');
            grid.innerHTML = '';
            
            artworks.forEach(artwork => {
                const artworkElement = document.createElement('div');
                artworkElement.className = 'group cursor-pointer';
                artworkElement.innerHTML = `
                    <div class="relative overflow-hidden rounded-lg bg-gray-800 aspect-[3/4] hover:scale-105 transition-transform duration-300">
                        <img src="${artwork.image}" 
                            alt="${artwork.alt}" 
                            class="w-full h-full object-cover group-hover:opacity-90 transition-opacity duration-300">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300"></div>
                    </div>
                `;
                
                // Add click event listener to the artwork element
                artworkElement.addEventListener('click', () => {
                    openArtworkModal(artwork.id, artwork.image, artwork.alt);
                });
                
                grid.appendChild(artworkElement);
            });
        }

        // Function to open artwork in modal
        function openArtworkModal(id, image, alt) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 p-4 backdrop-blur-sm';
            modal.style.animation = 'fadeIn 0.3s ease-out';
            
            modal.innerHTML = `
                <div class="relative max-w-6xl max-h-full flex items-center justify-center">
                    <img src="${image}" 
                         alt="${alt}" 
                         class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"
                         style="animation: scaleIn 0.3s ease-out;">
                    <button onclick="closeModal(this)" 
                            class="absolute top-4 right-4 text-white text-3xl bg-black bg-opacity-60 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-80 transition-all duration-200 font-bold">
                        ×
                    </button>
                </div>
            `;
            
            // Close modal when clicking outside the image
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal);
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', function escapeHandler(e) {
                if (e.key === 'Escape') {
                    closeModal(modal);
                    document.removeEventListener('keydown', escapeHandler);
                }
            });
            
            document.body.appendChild(modal);
        }

        // Function to close modal with animation
        function closeModal(element) {
            const modal = element.closest ? element.closest('.fixed') : element;
            modal.style.animation = 'fadeOut 0.3s ease-out';
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.remove();
                }
            }, 300);
        }

        // Load artworks when page loads
        document.addEventListener('DOMContentLoaded', loadArtworks);
        </script>

        <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes scaleIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }
        </style>
    </main>

    <script src="../assets/js/components.js"></script>
    <script src="../assets/js/script.js"></script>
</body>
</html>